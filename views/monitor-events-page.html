{{ define "monitor-events-table" }}
{{ if .HasNextPage }}
<tbody class="table-tbody" hx-get="/api/monitor/{{.MonitorID}}/table/events?page={{.NextPage}}" hx-trigger="revealed" hx-swap="afterend">
		{{ range .Activity }}
		{{ if eq .Source "event" }}
		<tr>
				<td class="d-flex justify-content-between align-items-center">
						<div>
								<span class="tag" style="background: black;color: white;">
										Event
								</span>
								{{ if eq .FromStatus "up" }}
								<span class="badge bg-green text-green-fg tag-status badge-empty">
								</span>
								up
								{{ else if eq .FromStatus "grace_period" }}
								<span class="badge bg-orange text-orange-fg tag-status badge-empty">
								</span>
								grace period
								{{ else }}
								<span class="badge bg-red text-red-fg tag-status badge-empty">
								</span>
								down
								{{ end }}
								to
								{{ if eq .ToStatus "up" }}
								<span class="badge bg-green text-green-fg tag-status badge-empty">
								</span>
								up
								{{ else if eq .ToStatus "grace_period" }}
								<span class="badge bg-orange text-orange-fg tag-status badge-empty">
								</span>
								grace period
								{{ else }}
								<span class="badge bg-red text-red-fg tag-status badge-empty">
								</span>
								down
								{{ end }}
						</div>
						<div class=" d-block text-secondary text-truncate mt-n1">{{ createdAtDistanceWithAgo .CreatedAt }}</div>
				</td>
		</tr>
		{{ else }}
		<tr>
				<td class="d-flex justify-content-between align-items-center">
						<div>
								<span class="tag" style="background: grey;color: white;">
										Ping
								</span>
								<span class="tag">
										{{ if eq .Status 200 }}
										<span class="badge bg-green text-green-fg tag-status badge-empty"></span>
										{{ .Status }} OK
										{{ else }}
										<span class="badge bg-red text-red-fg tag-status badge-empty"></span>
										{{ .Status }} NOTOK
										{{ end }}
								</span>
						</div>
						<div class="text-secondary text-end">{{ createdAtDistanceWithAgo .CreatedAt }}</div>
				</td>
		</tr>
		{{ end }}
		{{ end }}
</tbody>
{{ end }}
{{ end }}


{{ template "base" }}
<body>
		<div class="page-body">
				<div class="container-xl">
						<h1>Monitor Activity</h1>
						<div class="card">
								<div class="card-body">
										<div id="table-default" class="table-responsive">
												<table class="table">
														<tbody class="table-tbody" hx-get="/api/monitor/{{.MonitorID}}/table/events?page=1" hx-trigger="load" hx-swap="afterend">
																{{ template "monitor-events" . }}
														</tbody>
												</table>
										</div>
								</div>
						</div>
				</div>
		</div>
</body>
